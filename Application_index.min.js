var Symbolab=function(a,c,b){this.params={};this.params.userId=a;this.params.query=c;this.params.language=b;this.init()};
Symbolab.prototype={init:function(){parseQueryParameters(this.params);$(".topnav ul li a").click(function(a){})},queryString:function(a){void 0==a&&(a={});a=$.extend({},this.params,a);var c=[],b;for(b in a){var d=a[b];""!=d&&c.push(b+"="+encodeURIComponent(d))}return c.join("&")},params:{},results:{},forwardSearch:function(a,c,b){if(""!==a){var d="/solver/";if("undefined"!=typeof SOLUTIONS&&""!==SOLUTIONS.page)d+=SOLUTIONS.page+"/";else{let e=window.location.pathname.split("/"),f="step-by-step";2<
e.length&&"solver"===e[1]&&""!==e[2]&&(f=e[2]);d+=f+"/"}d+=encodeURIComponent(a);c&&(d+="?or="+c);b?window.location=d:symbolab_log("Registration","ClickedFeature","ClickSuggest")}}};Symbolab.prototype.updateSolutionsUrl=function(){$("#solutionsTopNav a").attr("href","/solver/step-by-step/"+encodeURIComponent(this.params.query))};Symbolab.prototype.getTextLenScore=function(a){return(parseInt(a.textlen)+parseInt(a.eqlen))/1E5};
Symbolab.prototype.logRedirect=function(a,c,b,d){a={userId:this.params.userId,language:this.params.language,type:a,info1:c,info2:b,redirect:d};$("body").append($("<form/>",{id:"redirectPostForm",method:"POST",action:"/logRedirect"}));c=$("#redirectPostForm");for(var e in a)c.append($("<input/>",{type:"hidden",name:e,value:a[e]}));c.submit()};
Symbolab.prototype.showPopover=function(a,c,b){var d=this;a.popover({title:c,content:b,placement:"top",delay:{show:500,hide:5E3}}).popover("show");setInterval(function(){d.inputBox().popover("disable");d.inputBox().popover("hide")},4E3)};Symbolab.prototype.lastInsertedIsEquals=function(){var a=this.inputValue("latex");return a.indexOf("=")==a.length-1?1:0};
Symbolab.prototype.updateCalculation=function(){var a=this,c=a.inputValue("latex");a.calcmode||(a.calcmode="rad");0<=c.indexOf("=")&&(c=c.split("=")[0]);SYPAD.inputBox().mathquill("latex",c+" = ");$.ajax({type:"GET",url:Symbolab.paths.calculate,data:{query:c,radDeg:a.calcmode},error:function(b){a.showPopover(a.inputBox(),"Calculation Error","We ran into a problem calculating that. Try searching instead.")},success:function(b){void 0!=b.response&&"NA"!=b.response?a.appendInput(b.response):a.showPopover(a.inputBox(),
"Calculation Error","We ran into a problem calculating that. Try searching instead.")}})};
Symbolab.prototype.executeSearch=function(){var a=this.params.query;if(""!=a){a=a.replace(/\\(text|mbox)\s*{(.+?)}/g,"$2 ");a=a.replace(/\\:/g," ");a=a.replace(/\\left\\s*\(/g,"(");var c=a=a.replace(/\\right\\s*\)/g,")");this.params.query=a;""==a?(this.promptError("Cannot understand this query, please try a different query."),this.inputBox().mathquill("latex",prepareQueryForMathQuill(c))):0==this.currentPage()||100<this.currentPage()?this.promptError("Allowed page numbers are 1-100."):(this.inputBox().mathquill("latex",
prepareQueryForMathQuill(a)),$(".print-only .search-query").mathquill("latex",a),this.updateSolutionsUrl(),this.updateResults(),this.isScholar||this.updateStepsPlot())}};Symbolab.prototype.promptError=function(a){this.clearResults();document.title="Error - Symbolab Results";$("#ShareButtonsSection").prepend("<span class='errorMsg'>"+a+"</span>");$("#Refinements .scholar-refinements, #Refinements .web-refinements").hide();$("#Codepad .actions").hide()};
Symbolab.convert2html=function(a){a=a.replace(/</g,"&lt;");return a=a.replace(/>/g,"&gt;")};function url_domain(a){var c=document.createElement("a");c.href=a;return c.hostname}function htmlDecode(a){if(""==a)return a;var c=document.createElement("div");c.innerHTML=a;return c.childNodes[0].nodeValue}
Symbolab_toolbar_functions={Basic:{prepend:function(a,c){SYPAD.prependInput(c.data("prepend"),c.data("moveleft"))},append:function(a,c){SYPAD.appendInput(c.data("append"),c.data("moveleft"))},clear:function(){SYPAD.inputBox(!1).mathquill("latex","")}},Calc:{mode:function(a,c){void 0==SYPAD.calcmode&&(SYPAD.calcmode="rad");"deg"==symbolab.calcmode?(c.addClass("radmode"),SYPAD.calcmode="rad"):(c.removeClass("radmode"),SYPAD.calcmode="deg")},calculate:function(a,c){SYPAD.updateCalculation()},"x!":function(a,
c){SYPAD.appendInput("!")}}};
var SymbolabPad=function(a,c,b,d){this.language=a;this.customInputboxSelector=c;this.allowsSearching=b;void 0===d&&(d=!1);this.triggerOnKeyUpEvents=d;this.periodicTable=[["H",,,,"\\Rightarrow","O_{\\msquare}",,,,,,,,,,,,"He"],["Li","Be",,,,,,,,,,,"B","C","N","O","F","Ne"],["Na","Mg",,,,,,,,,,,"Al","Si","P","S","Cl","Ar"],"K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge As Se Br Kr".split(" "),"Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag Cd In Sn Sb Te I Xe".split(" "),["Cs","Ba",,"Hf","Ta","W","Re","Os","Ir","Pt","Au",
"Hg","Tl","Pb","Bi","Po","At","Rn"],["Fr","Ra",,"Rf","Db","Sg","Bh","Hs","Mt","Ds","Rg","Cn","Uut","Fl","Uup","Lv","Uus","Uuo"],[,,,,,,,,,,,,,,,,,],[,,"La","Ce","Pr","Nd","Pm","Sm","Eu","Gd","Tb","Dy","Ho","Er","Tm","Yb","Lu"],[,,"Ac","Th","Pa","U","Np","Pu","Am","Cm","Bk","Cf","Es","Fm","Md","No","Lr"]];this.elementNames={"\\Rightarrow":"Right arrow","O_{\\msquare}":"Underscore",H:"Hydrogen",He:"Helium",Li:"Lithium",Be:"Beryllium",B:"Boron",C:"Carbon",N:"Nitrogen",O:"Oxygen",F:"Fluorine",Ne:"Neon",
Na:"Sodium",Mg:"Magnesium",Al:"Aluminum",Si:"Silicon",P:"Phosphorus",S:"Sulfur",Cl:"Chlorine",Ar:"Argon",K:"Potassium",Ca:"Calcium",Sc:"Scandium",Ti:"Titanium",V:"Vanadium",Cr:"Chromium",Mn:"Manganese",Fe:"Iron",Co:"Cobalt",Ni:"Nickel",Cu:"Copper",Zn:"Zinc",Ga:"Gallium",Ge:"Germanium",As:"Arsenic",Se:"Selenium",Br:"Bromine",Kr:"Krypton",Rb:"Rubidium",Sr:"Strontium",Y:"Yttrium",Zr:"Zirconium",Nb:"Niobium",Mo:"Molybdenum",Tc:"Technetium",Ru:"Ruthenium",Rh:"Rhodium",Pd:"Palladium",Ag:"Silver",Cd:"Cadmium",
In:"Indium",Sn:"Tin",Sb:"Antimony",Te:"Tellurium",I:"Iodine",Xe:"Xenon",Cs:"Caesium",Ba:"Barium",Hf:"Hafnium",Ta:"Tantalum",W:"Tungsten",Re:"Rhenium",Os:"Osmium",Ir:"Iridium",Pt:"Platinum",Au:"Gold",Hg:"Mercury",Tl:"Thallium",Pb:"Lead",Bi:"Bismuth",Po:"Polonium",At:"Astatine",Rn:"Radon",Fr:"Francium",Ra:"Radium",Rf:"Rutherfordium",Db:"Dubnium",Sg:"Seaborgium",Bh:"Bohrium",Hs:"Hassium",Mt:"Meitnerium",Ds:"Darmstadtium",Rg:"Roentgenium",Cn:"Copernicium",Uut:"Ununtrium",Fl:"Flerovium",Uup:"Ununpentium",
Lv:"Livermorium",Uus:"Ununseptium",Uuo:"Ununoctium",La:"Lanthanum",Ce:"Cerium",Pr:"Praseodymium",Nd:"Neodymium",Pm:"Promethium",Sm:"Samarium",Eu:"Europium",Gd:"Gadolinium",Tb:"Terbium",Dy:"Dysprosium",Ho:"Holmium",Er:"Erbium",Tm:"Thulium",Yb:"Ytterbium",Lu:"Lutetium",Ac:"Actinium",Th:"Thorium",Pa:"Protactinium",U:"Uranium",Np:"Neptunium",Pu:"Plutonium",Am:"Americium",Cm:"Curium",Bk:"Berkelium",Cf:"Californium",Es:"Einsteinium",Fm:"Fermium",Md:"Mendelevium",No:"Nobelium",Lr:"Lawrencium"};this.init()};
SymbolabPad.prototype={init:function(){var a=this,c=$("body");c.click(function(b){a.selectChild("#CodePadSuggestions").hide();$("#tsUl").hide()});this.selectChild("button.search").click(function(b){a.initateSearch()});$("#main-input").keyup(function(b){13==b.keyCode&&a.initateSearch()});c.on("click",'[class^="pad-toolbar-"]',function(b){a.switchPad($(this));0<=this.className.indexOf("chemistry")&&a.createChemistryPad("#chemistryTable");b=$(this).attr("class").split(" ")[0].split("-")[2].capitalize();
symbolab_log("Pad","KeyboardType",b)});c.on("click",".pad-button-matrix c",function(b){b=$(this).mathquill("latex");b=b.replace("\\left(","");b=b.replace("\\right)","");var d=b.split("\\times"),e=createMatrixLatex(d[0],d[1]);a.inputBox(!1).mathquill("write",e,d[0]*d[1]);a.inputBox(!1).focus();symbolab_log("Pad","Matrix","matrix:"+b);return!1});this.selectChild(".padButton").each(function(b,d){b=$(d);d=b.attr("title");void 0!==d&&null!==d&&""!==d||b.attr("title",b.data("append"))});c.on("click",".equalsBtn",
function(b){a.initateSearch()});c.on("click",".radBtn",function(b){$(".radBtn").addClass("active");$(".degBtn").removeClass("active")});c.on("click",".degBtn",function(b){$(".radBtn").removeClass("active");$(".degBtn").addClass("active")});c.on("click",".clearBtn",function(b){a.replaceInput("")});c.off("click",".padButton:not(.disabled)").on("click",".padButton:not(.disabled)",function(b){a.padButtonClick(this)});$("#toggle_mini_keypad, .toggle_mini_keypad").click(function(){const b=$(this),d=b.find("img.open"),
e=b.find("img.close"),f=b.siblings("#mini_codepad, .mini_codepad");b.hasClass("open")?(b.removeClass("open"),e.fadeOut("fast",function(){f.slideUp(function(){d.fadeIn("fast")})}),symbolab_log("Pad","CompactPad","Contract")):(b.addClass("open"),d.fadeOut("fast",function(){f.slideDown(function(){e.fadeIn("fast")})}),symbolab_log("Pad","CompactPad","Expand"))});c.off("click","#see_all_text").on("click","#see_all_text",function(){$(".nl-padOperators").toggleClass("no-hover")});$("#see_all_span").on("mouseenter",
function(){$(".nl-padOperators").removeClass("no-hover");$("#most_used_dropdown").scrollTop(0)});$.data(this,"timer",setTimeout(function(){a.setSeeAllDropdownHeight()},50));window.addEventListener("resize",function(){a.setSeeAllDropdownHeight()});c.off("click",".padSelect").on("click",".padSelect",function(){const b=$(this);a.padButtonClick(b);b.parent().addClass("no-hover");setTimeout(function(){b.parent().removeClass("no-hover")},500)});c.off("click","#all-pads").on("click","#all-pads",function(b){0===
$(b.target).closest("svg, .toggle_mini_keypad, .nl-padOperators-surround").length&&$("#main-input").focus()});c.off("click",".edit-bar-spacer").on("click",".edit-bar-spacer",function(){$("#all-pads").hasClass("on")?$("#main-input").focus():$("#toggle-pad").click()});c.off("click","#toggle-pad").on("click","#toggle-pad",function(){const b=$("#all-pads").toggleClass("on").hasClass("on");$("#toggle-pad").toggleClass("on",b);b?($("#all-pads").mathquill("redraw"),$("#main-input").focus(),symbolab_log("General",
"Open Pad"),a.setSeeAllDropdownHeight()):symbolab_log("General","Close Pad")});c.off("click","#main-input").on("click","#main-input",function(b){0<$(b.originalEvent.target).parents("#toggle-pad").length||$("#all-pads").hasClass("on")||($("#all-pads").toggleClass("on"),$("#toggle-pad").toggleClass("on"),$("#all-pads").mathquill("redraw"),a.setSeeAllDropdownHeight(),symbolab_log("General","Open Pad"))});c.off("focus.mathquill","#main-input.mathquill-editable").on("focus.mathquill","#main-input.mathquill-editable",
function(){a.inputGotFocus()});c.off("click",".toggle-full-pad svg").on("click",".toggle-full-pad svg",b=>this.toggleFullPad())},inputGotFocus:function(){const a=$("#all-pads");a.hasClass("on")||(a.toggleClass("on"),$("#toggle-pad").toggleClass("on"),a.mathquill("redraw"),this.setSeeAllDropdownHeight(),symbolab_log("General","Open Pad"))},toggleFullPad:function(){dynamicLoadingManager.get("dynamic-codepad").then(()=>{$(".codepad-container").toggle();$("#widgetPad").toggleClass("hide");var a=$(".toggle-full-pad svg use").attr("href");
$("#all-pads").mathquill("redraw");a="#toggle-full-keypad"===a?"#toggle-full-keypad-open":"#toggle-full-keypad";$(".toggle-full-pad svg use").attr("href",a);this.setSeeAllDropdownHeight();"#toggle-full-keypad"===a?($("#Compact").show(),symbolab_log("Solutions","switch","compact pad")):(symbolab_log("Solutions","switch","full pad"),a=$('[class^="pad-toolbar-"].active').attr("class").split(" ")[0].split("-")[2].capitalize(),symbolab_log("Pad","KeyboardType",a))})},setSeeAllDropdownHeight:function(){if(0<
$("#see_all_text").length){let a=$(window).height()-$("#see_all_text").offset().top-$("#see_all_text").outerHeight()+$(window).scrollTop()-20;$("#most_used_dropdown").css("max-height",a+"px")}},sortSelect:function(a){var c=a.val(),b=a.find("option").sort(function(d,e){return 0==d.index?-1:0==e.index?1:d.text.localeCompare(e.text,this.language,{sensitivity:"base"})});a.html(b).val(c)},appendButtonAndGetLogInfo:function(a){a=$(a);var c=a.parents("table:first"),b=a.data("function"),d=c.attr("id");a.data("clear")&&
Symbolab_toolbar_functions.Basic.clear();if("undefined"!=typeof b){var e=b;Symbolab_toolbar_functions[d][b](symbolab,c,a)}else"undefined"!=typeof a.data("append")?(e=a.data("append"),Symbolab_toolbar_functions.Basic.append(c,a)):"undefined"!=typeof a.data("prepend")?(e=a.data("prepend"),Symbolab_toolbar_functions.Basic.prepend(c,a)):e=$("#chemistryTable").is(":visible")?"Chemistry":$(".matrixTable").is(":visible")?"Matrix":a.attr("id");return[e,d]},padButtonClick:function(a){var c=this.appendButtonAndGetLogInfo(a);
a=c[0];c=c[1];"/"!=window.location.pathname?symbolab_log("Pad",c,a):symbolab_log("MainPagePad",c,a);this.inputBox(!1).focus();return!1},switchPad:function(a){var c=a.attr("class").split(" ")[0].split("-")[2].capitalize(),b=SYPAD.selectChild("#"+c);SYPAD.selectChild("table.buttons:not(.nohide)").hide();"Chemistry"==c||"Calculator"==c?SYPAD.selectChild("#Common.buttons").hide():SYPAD.selectChild("#Common.buttons").show();b.show();SYPAD.selectChild('[class^="pad-toolbar-"]').removeClass("active");a.addClass("active");
SYPAD.currentToolbar=c;SYPAD.showAllButtons();$(".button-container .mathquill-embedded-latex").mathquill("redraw")},inputValue:function(a){a=this.inputBox(a).mathquill("latex");return this.cleanSearchPhrase(a)},cleanSearchPhrase:function(a){void 0!=a&&(a=a.replace(/\\:/g," "),a=a.replace(/(\^\{(.*?)\}|\^(.))/g,"^{$2$3}"),a=a.replace(/(_\{(.*?)\}|_(.))/g,"_{$2$3}"));return a},initateSearch:function(){var a=this;if(!a.searching&&(void 0===this.allowsSearching||this.allowsSearching)){var c=this.inputValue(!0);
if(""!=c)if(searchInitiatedLog(c),$("table#Calculator").is(":visible"))this.searching=!0,c=$(".radBtn").hasClass("active"),$.ajax({type:"GET",url:"/calculate",data:{query:SYPAD.inputValue(),isRad:c},success:function(b){SYPAD.replaceInput(b.response)},complete:function(){a.searching=!1}});else{let b="input";this.suggestedQuery&&(b=c===this.suggestedQuery?"sug":"sugEdit");SYMBOLAB.forwardSearch(c,b,!0)}}},appendInput:function(a,c){if("undefined"!=typeof a){"undefined"==typeof c&&(c=0);var b=this.inputBox(!1).focus();
b.mathquill("write",a+"",c).focus();"undefined"!=typeof SYSUGGEST&&void 0!=SYSUGGEST&&0==$("table#Calculator").is(":visible")&&SYSUGGEST.updateSuggestions(this.inputValue());"undefined"!=typeof SYGRAPH&&SYGRAPH&&(SYGRAPH.updateGraphInputOverflow(b,!0),SYGRAPH.getJsonAndDraw(),SYGRAPH.unchangedSinceLoad=!1);this.triggerOnKeyUpEvents&&$(b).keyup()}},replaceInput:function(a){a=prepareQueryForMathQuill(a);this.inputBox(!1).mathquill("latex",a)},inputFromSuggest(){this.suggestedQuery=this.inputValue(!0)},
selectChild:function(a){return $(a)},showCommonButtons:function(){this.selectChild(".codepadbody .buttons:not(.hide) tr").hide();this.selectChild(".codepadbody .buttons:not(.hide) tr:first").show();this.selectChild("#Basic").hide()},showAllButtons:function(){this.selectChild(".codepadbody .buttons:not(.hide) tr").show()},inputBox:function(a){return void 0!==this.customInputboxSelector&&$(this.customInputboxSelector).is(":visible")?$(this.customInputboxSelector):a?$("#main-input"):null!=this.activeInputBox?
this.activeInputBox:this.selectChild(".mathquill-editable:first")},inputBoxIndex:function(){var a=this.inputBox(!1);return $(".graph-input").index(a)},createChemistryPad:function(a){var c=this;a=$(a);if(a.is(":empty")){for(var b="<tbody>",d=0;d<this.periodicTable.length;d++){b+="<tr>";for(var e=this.periodicTable[d],f=0;f<e.length;f++)b=e[f]?b+("<td class='atomInTable' title='"+c.elementNames[e[f]]+"'><span class='mathquill-embedded-latex'>\\mathrm{"+e[f]+"}</span></td>"):b+"<td class='noAtomInTable'></td>";
b+="</tr>"}a.append(b+"</tbody>");a.find(".mathquill-embedded-latex").mathquill();$(".atomInTable").click(function(){var g=$(this).find(".mathquill-embedded-latex").mathquill("latex"),h=0;0<g.indexOf("_")?(g="_",h=1):(g=g.replace("\\mathrm{",""),g=g.replace("}",""));c.inputBox(!1).mathquill("write",g,h);c.inputBox(!1).focus();symbolab_log("Pad","Chemistry",g)})}$(".solution-codepad-header span").html("\u00ab "+i18n("compact pad"));$("#Compact").hide();a.show();a.find(".mathquill-embedded-latex").mathquill("redraw")},
createCalculatorPad:function(a){var c=this;a=$(a);if(a.is(":empty")){for(var b="<tbody>",d=0;d<this.periodicTable.length;d++){b+="<tr>";for(var e=this.periodicTable[d],f=0;f<e.length;f++)b=e[f]?b+("<td class='atomInTable' title='"+c.elementNames[e[f]]+"'><span class='mathquill-embedded-latex'>\\mathrm{"+e[f]+"}</span></td>"):b+"<td class='noAtomInTable'></td>";b+="</tr>"}a.append(b+"</tbody>");a.find(".mathquill-embedded-latex").mathquill();$(".atomInTable").click(function(){var g=$(this).find(".mathquill-embedded-latex").mathquill("latex"),
h=0;0<g.indexOf("_")?(g="_",h=1):(g=g.replace("\\mathrm{",""),g=g.replace("}",""));c.inputBox(!1).mathquill("write",g,h);c.inputBox(!1).focus();symbolab_log("Pad","Chemistry",g)})}$(".solution-codepad-header span").html("\u00ab "+i18n("compact pad"));$("#Compact").hide();a.show();a.find(".mathquill-embedded-latex").mathquill("redraw")}};var SymbolabEquationSuggest=function(a){this.isMobile=a;this.init()};
SymbolabEquationSuggest.prototype={init:function(){const a=this;var c=this;$("#main-input").keyup(function(b){if(37==b.keyCode||39==b.keyCode||$("table#Calculator").is(":visible"))return!1;if(38==b.keyCode)$("#CodePadSuggestions").is(":visible")&&c.moveSuggestion(-1);else if(8!=b.keyCode&&"Calc"==SYPAD.currentToolbar&&1==symbolab.lastInsertedIsEquals())c.updateCalculation();else if(40==b.keyCode)$("#CodePadSuggestions").is(":visible")&&c.moveSuggestion(1);else if(27==b.keyCode)c.selectChild("#CodePadSuggestions").hide();
else{const d=SYPAD.inputValue("latex");setTimeout(function(){const e=SYPAD.inputValue("latex");""===e?(a.isMobile||$("#input-camera").css("visibility","visible"),$("#CodePadSuggestions").hide()):(a.isMobile||$("#input-camera").css("visibility","hidden"),d===e&&c.updateSuggestions(e))},150)}})},moveSuggestion:function(a){var c,b=$("#CodePadSuggestions li.active");0>a&&0==b.length||(0==b.length?c=$("#CodePadSuggestions li:first"):1==a?c=b.next():-1==a&&(c=b.prev()),0!=c.length&&(this.highlightSuggestion(b,
c,!0),SYPAD.inputBox().focus()))},highlightSuggestion:function(a,c,b){a&&a.removeClass("active");c.addClass("active");b&&(SYPAD.replaceInput(c.attr("title")),SYPAD.inputFromSuggest())},clearSuggestions:function(a){a=$("#CodePadSuggestions");a.find("li").remove();a.hide()},updateSuggestions:function(a){if(!this.updatingSuggestions&&!this.disable_suggestions){this.updatingSuggestions=!0;var c=this,b=$("#CodePadSuggestions");$.ajax({type:"GET",url:"/suggest",data:{userId:SYMBOLAB.params.userId,connected:SYMBOLAB.params.connected,
language:SYMBOLAB.params.language,query:a},error:function(d){c.updatingSuggestions=!1;b.hide()},success:function(d){c.clearSuggestions();if(void 0==d||0==d.length)b.hide(),c.updatingSuggestions=!1;else{for(var e in d)c.addSuggestion(d[e].display);b.show();c.updatingSuggestions=!1;b.find(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill();b.find("li").hover(function(f){var g=$("#CodePadSuggestions li.active");f=$(f.currentTarget);c.highlightSuggestion(g,f,!1)});b.find("li").click(function(f){var g=
b.find("li.active");f=$(f.currentTarget);c.highlightSuggestion(g,f,!0);"undefined"!=typeof widget&&1==widget?makeWidgetSearch():(g=SYPAD.inputValue("latex"),SYMBOLAB.forwardSearch(g,"sug",!1))})}}})}},addSuggestion:function(a){a=prepareQueryForMathQuill(a);$("#CodePadSuggestions").append('<li title="'+a+'"><div class="mathquill-embedded-latex"">'+a+"</div></li>")}};var currentElementNumber=2;
const elements=[{id:"notebooks",title:i18n("Notebook"),description:i18n("notebooks-description"),link:"/notebook"},{id:"physics",title:i18n("physics"),description:i18n("physics-description"),link:"/solver/physics-calculator"},{id:"calculators",title:i18n("Calculator Title"),description:i18n("calculators-description"),link:"/calculators"},{id:"cheat-sheets",title:i18n("Cheat Sheets"),description:i18n("cheat-sheets-description"),link:"/cheat-sheets"},{id:"groups",title:i18n("Groups"),description:i18n("groups-description"),
link:"/groups"}];
function setupExploreMore(){var a=$("#homepage-explore-third-bar svg use").attr("href");for(let c=0;c<elements.length;c++)-1!==a.indexOf(elements[c].id)&&(currentElementNumber=c);a=$("body");a.off("click","#homepage-explore-arrow-left").on("click","#homepage-explore-arrow-left",function(){replaceElements(!1)});a.off("click","#homepage-explore-first-bar").on("click","#homepage-explore-first-bar",function(){replaceElements(!1);replaceElements(!1)});a.off("click","#homepage-explore-second-bar").on("click","#homepage-explore-second-bar",
function(){replaceElements(!1)});a.off("click","#homepage-explore-arrow-right").on("click","#homepage-explore-arrow-right",function(){replaceElements(!0)});a.off("click","#homepage-explore-fourth-bar").on("click","#homepage-explore-fourth-bar",function(){replaceElements(!0)});a.off("click","#homepage-explore-fifth-bar").on("click","#homepage-explore-fifth-bar",function(){replaceElements(!0);replaceElements(!0)});a.off("click","#homepage-practice-button").on("click","#homepage-practice-button",function(c){c.preventDefault();
var b=$(this).attr("href");$.when(symbolab_log("General","TryItNowButton",b)).always(function(){window.location=b})});a.off("click",".homepage-center a, #homepage-practice-img").on("click",".homepage-center a, #homepage-practice-img",function(){getLocalStorage().setItem("linkOrigin","HomePageVideo")});a.off("click","#homepage-explore-third-bar").on("click","#homepage-explore-third-bar",function(c){c.preventDefault();let b=$(this).attr("href");$.when(symbolab_log("General","Carousel",b)).always(function(){window.location=
b})});$("#popular-calculators-links a").click(function(c){c.preventDefault();var b=$(this).attr("href");$.when(symbolab_log("General","Popular Calculator",b)).always(function(){window.location=b})})}
function replaceElements(a){currentElementNumber=(currentElementNumber+(a?1:-1))%elements.length;a=elements[currentElementNumber];i18n(a.title);$("#homepage-explore-body-headline").text(a.title);$("#homepage-explore-body-text").text(a.description);2>currentElementNumber&&(currentElementNumber+=5);$("#homepage-explore-first-bar svg use").attr("href","#explore-"+elements[(currentElementNumber-2)%elements.length].id);$("#homepage-explore-second-bar svg use").attr("href","#explore-"+elements[(currentElementNumber-
1)%elements.length].id);$("#homepage-explore-third-bar svg use").attr("href","#explore-"+elements[currentElementNumber%elements.length].id);$("#homepage-explore-fourth-bar svg use").attr("href","#explore-"+elements[(currentElementNumber+1)%elements.length].id);$("#homepage-explore-fifth-bar svg use").attr("href","#explore-"+elements[(currentElementNumber+2)%elements.length].id);$("#homepage-explore").html($("#homepage-explore").html());$("#homepage-explore-third-bar").attr("href",elements[currentElementNumber%
elements.length].link)}function setupInstantCalculators(){$("#calculators a").on("click",function(){getLocalStorage().setItem("linkOrigin","HomePage")})}function DynamicLoadingPromiseCompletionSource(){let a,c;return{promise:new Promise((b,d)=>{a=b;c=d}),resolve:a,reject:c}}
class DynamicLoadingManager{constructor(){this.promises={}}deferRawHtml(a,c,b){this.promises[a]=new DynamicLoadingPromiseCompletionSource;$(document).ready(()=>{$(b).load(c,()=>{$(b).find(".mathquill-embedded-latex:not(.mathquill-rendered-math)").mathquill();this.promises[a]?.resolve()})})}get(a){return this.promises[a]?.promise}}const dynamicLoadingManager=new DynamicLoadingManager;
class SyCamera{constructor(a,c,b,d,e,f){this._baseReason=a;this._curLang=c;this._page=b;this._debugMode=d;this._body=$("body");this._container=$("#video");this._cropContainer=$("#crop_handle_container");this._animationCanvas=$("#bar_animation");this._imageArea=$("#user-image");this._oneCorner=$("#crop_top_left");this._cameraSuccessCallback=f;this._cameraButtonSelector=void 0===e?"#input-camera":e;this._wholeTouchY=this._wholeTouchX=0;this._logInfo=null;this.logName="Solver";a=a.split("\t");"Web"===
a[0]&&(this.logName=this._logInfo=a[1]);0<=window.location.hash.indexOf("camera")&&(a=window.location.href.replace(/#.*/,""),window.history.replaceState({},document.title,a));this._setupCameraClick();window.onhashchange=()=>{"#camera"!==window.location.hash&&this._closeCamera()};$("#video :not(#crop_handle_container)").off("click").on("click",g=>{0===$("#user-image:hover").length&&0===$("#shutter_container:hover").length&&0===$("#crop_handle_container:hover").length&&0===$("#video-close-bt:hover").length&&
null!==this._logInfo&&(g.preventDefault(),g.stopPropagation(),symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tCancelCrop"),this._closeCamera())});$("#video-close-btn").off("click").on("click",g=>{null===this._logInfo&&symbolab_log("Registration","ClickedFeature","Solver\tImageDialog\tCancelCrop")})}_setupCameraClick(){const a=this,c=new FileReader;var b=$("#file-input-target");b.empty();const d=$('<input type="file"\n\t\t\t\t\t\t\t\t  capture="environment"\n\t\t\t\t\t\t\t\t  accept="image/*">');
b.append(d);d.on("change",()=>{const e=d[0].files[0];e&&(c.addEventListener("load",()=>{const f=new Image;f.src=c.result;f.onload=()=>{symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tChoose");$("#user-image").attr("src",c.result);this._openCamera(f.width,f.height)};f.onerror=()=>{setTimeout(function(){a._setupCameraClick();symbolab_log("Registration","ClickedFeature",a.logName+"\tImageDialog\tInvalid")},50);const g=i18n("Please open a valid image file");dialogify().dialogId("image-dialog").message(g).showOkDialog()}}),
c.readAsDataURL(e))});b=$(this._cameraButtonSelector);b.removeClass("hide-important");b.off("click").on("click",e=>{e.preventDefault();d.click();symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tOpen")});$("#scan-to-solve").off("click").on("click",e=>{e.preventDefault();d.click()});$("#decoration svg").off("click").on("click",e=>{e.preventDefault();d.click()})}_openCamera(a,c){window.location.hash="#camera";this._sessionId=this._uuidSessionId();this._body.addClass("no-scroll");
$("#video").removeClass("hide-important");this._cropPositionMove(0,0);$("#user-image").css("aspect-ratio",""+a+"/"+c);$("#crop_top_left").off("touchstart").on("touchstart",b=>{this._handleTouchStart(b)});$("#crop_top_right").off(" touchstart").on("touchstart",b=>{this._handleTouchStart(b)});$("#crop_bottom_right").off("touchstart").on("touchstart",b=>{this._handleTouchStart(b)});$("#crop_bottom_left").off("touchstart").on("touchstart",b=>{this._handleTouchStart(b)});$("#crop_top_left").off("touchmove").on("touchmove",
b=>{this._handleTouchMove(b,0)});$("#crop_top_right").off("touchmove").on("touchmove",b=>{this._handleTouchMove(b,1)});$("#crop_bottom_right").off("touchmove").on("touchmove",b=>{this._handleTouchMove(b,2)});$("#crop_bottom_left").off("touchmove").on("touchmove",b=>{this._handleTouchMove(b,3)});$("#crop_top_left").off("mousemove").on("mousemove",b=>{b.buttons&1?this._handleTouchMove(b,0):this._handleTouchStart(b)});$("#crop_top_right").off("mousemove").on("mousemove",b=>{b.buttons&1?this._handleTouchMove(b,
1):this._handleTouchStart(b)});$("#crop_bottom_right").off("mousemove").on("mousemove",b=>{b.buttons&1?this._handleTouchMove(b,2):this._handleTouchStart(b)});$("#crop_bottom_left").off("mousemove").on("mousemove",b=>{console.log("bottom left");b.buttons&1?this._handleTouchMove(b,3):this._handleTouchStart(b)});$("#crop_handle_container").off("mousedown touchstart").on("mousedown touchstart",b=>{this._cropMove(b,!1,!0)});$("#crop_handle_container").off("touchmove").on("touchmove",b=>{this._cropMove(b,
!0,!0)});$("#crop_handle_container").off("mousemove").on("mousemove",b=>{this._cropMove(b,b.buttons&1,b.buttons&1)});this._body.off("mousedown touchstart").on("mousedown touchstart",b=>{});$("#shutter").off("click").on("click",async()=>{await this._doCapture(a,c)});window.addEventListener("resize",()=>{this._cropPositionMove(0,0)});this._ready=!0}_cropMove(a,c,b){!(0<$(a.originalEvent.target).closest(".crop-corner").length)&&(c&&(a.preventDefault(),a.stopPropagation()),a=void 0!==a.originalEvent.touches?
a.originalEvent.touches[0]:a.originalEvent)&&(b&&this._entireCropWindowMove(a.clientX,a.clientY,this._wholeTouchX,this._wholeTouchY),this._wholeTouchX=a.clientX,this._wholeTouchY=a.clientY)}_closeCamera(){this._debugLog("Closing camera");$("#video").addClass("hide-important");$("#user-image").removeAttr("src");this._setupCameraClick();$("#latex-result").addClass("hide-important");$("#store-prompt").addClass("hide-important");this._animationCanvas.addClass("hide-important");this._body.removeClass("no-scroll")}_uuidSessionId(){return"SNAP-xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,
function(a){const c=16*Math.random()|0;return("x"===a?c:c&3|8).toString(16)})}_entireCropWindowMove(a,c,b,d){const e=this._imageArea.height(),f=this._container.width();var g=this._imageArea.offset();const h=this._imageArea.offsetParent().offset(),w=this._cropContainer.width(),v=this._cropContainer.height();var q=this._cropContainer.offset();const p=q.left;q=q.top-h.top;g=Math.round(g.top-h.top);a=p+(a-b);c=q+(c-d);w+a>f?a=p:0>a&&(a=p);v+c>e+g?c=q:c<g&&(c=q);a=Math.round(a);c=Math.round(c);this._cropContainer.css({left:a+
"px",top:c+"px"})}_cropPositionMove(a,c,b,d,e){const f=this._imageArea.height(),g=this._container.width();var h=this._imageArea.offset();const w=this._imageArea.offsetParent().offset(),v=2*this._oneCorner.width(),q=1.2*this._oneCorner.height(),p=this._cropContainer.width(),t=this._cropContainer.height();var r=this._cropContainer.offset();const u=r.left;r=r.top-w.top;h=Math.round(h.top-w.top);let k,l,m,n;if(0===a&&0===c)k=300,l=200,m=(g-k)/2,n=(f-l)/2+h;else switch(a-=b,c-=d,e){case 0:m=u+a;k=p-a;
n=r+c;l=t-c;break;case 1:m=u;k=p+a;n=r+c;l=t-c;break;case 2:m=u;k=p+a;n=r;l=t+c;break;case 3:m=u+a,k=p-a,n=r,l=t+c}k+m>g?(k=g-m,k<v&&(k=v,m=g-k)):0>m&&(m=u,k=p);l+n>f+h?(l=f+h-n,l<q&&(n=f+h-l)):n<h&&(n=r,l=t);k<v&&(k=p,m=u);l<q&&(l=t,n=r);k=Math.round(k);l=Math.round(l);m=Math.round(m);n=Math.round(n);this._cropContainer.css({left:m+"px",top:n+"px",width:k+"px",height:l+"px"});this._animationCanvas[0].width=k;this._animationCanvas[0].height=l}_handleTouchStart(a){if(a=void 0!==a.originalEvent.touches?
a.originalEvent.touches[0]:a.originalEvent)this._currentX=a.clientX,this._currentY=a.clientY}_handleTouchMove(a,c){a.preventDefault();a.stopPropagation();if(a=void 0!==a.originalEvent.touches?a.originalEvent.touches[0]:a.originalEvent)this._cropPositionMove(a.clientX,a.clientY,this._currentX,this._currentY,c),this._currentX=a.clientX,this._currentY=a.clientY}async _doCapture(a,c){if(this._ready){this._ready=!1;this._animationCanvas.removeClass("hide-important");var b=$("#image-canvas")[0],d=$("#user-image"),
e=$("#crop_handle_container");a=d.width()/a;c=d.height()/c;b.width=e.width()/a;b.height=e.height()/c;e=e.offset();var f=d.offset(),g=e.left-f.left;f=e.top-f.top;e=b.getContext("2d");e.drawImage(d[0],g/a,f/c,b.width,b.height,0,0,b.width,b.height);d=e.getImageData(0,0,e.canvas.width,e.canvas.height);a=d.data;for(c=0;c<a.length;c+=4)g=parseInt((a[c]+a[c+1]+a[c+2])/3),a[c]=g,a[c+1]=g,a[c+2]=g;e.putImageData(d,0,0);d=b.toDataURL("image/jpeg",.85);this._debugMode&&($("#debug-image")[0].src=d);b=new FormData;
d=this._dataURIToBlob(d);a=this._getSequence();e=("0000"+a).slice(-4)+".jpg";b.append("data",d,e);this._putSequence((a+1)%5E3);d=this._debugMode?"debug":"";this._animationCanvas.addClass("hide-important");$("#ocr_spinner").removeClass("hide-important");try{const h=await securedAjax({type:"POST",url:"/api/getLatex?mode="+d+"&sessionid="+this._sessionId+"&language="+this._curLang,data:b,processData:!1,contentType:!1});this._handleSuccess(h)}catch(h){symbolab_log("Registration","ClickedFeature",this.logName+
"\tImageDialog\tError"),console.log(h),this._showError(i18n("js.connectivity_error")),$("#ocr_spinner").addClass("hide-important")}}}_debugLog(a){this._debugMode&&console.log(a)}_dataURIToBlob(a){var c=a.split(",");a=0<=c[0].indexOf("base64")?atob(c[1]):decodeURI(c[1]);c=c[0].split(":")[1].split(";")[0];const b=new Uint8Array(a.length);for(let d=0;d<a.length;d++)b[d]=a.charCodeAt(d);return new Blob([b],{type:c})}_putSequence(a){localStorage.sequence=JSON.stringify(a)}_getSequence(){const a=localStorage.sequence;
return void 0===a?0:JSON.parse(a)}_setupShutterSoundAndPlay(){this._audioAlreadySetUp?this._playShutterSound():(this._audioAlreadySetUp=!0,this._context=new AudioContext,window.fetch("/public/audio/shutter.wav").then(a=>a.arrayBuffer()).then(a=>this._context.decodeAudioData(a)).then(a=>{this._shutterBuffer=a;this._playShutterSound()}).catch(a=>{this._debugLog("Failed to get shutter sound: "+a)}))}_playShutterSound(){if(this._shutterBuffer){var a=this._context.createBufferSource();a.buffer=this._shutterBuffer;
var c=this._context.createGain();c.gain.value=.5;c.connect(this._context.destination);a.connect(c);a.start()}}_handleSuccess(a){a.success?(symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tCrop"),this._cameraSuccessCallback?a.latex&&(window.location.hash="",this._cameraSuccessCallback(a.latex)):(this._ready=!0,a=encodeURIComponent(a.latex),window.location.href="/solver/"+this._page+"/"+a+"?or=crop")):(symbolab_log("Registration","ClickedFeature",this.logName+"\tImageDialog\tError"),
this._showError(a.user_message));$("#ocr_spinner").addClass("hide-important")}_showError(a){void 0===a&&(a=i18n("js.connectivity_error"));null===this._logInfo?$("#toast-contents").text(a).removeClass("hide-important").show().delay(2E3).fadeOut():dialogify().dialogId("image-dialog").message(a).showOkDialog();this._ready=!0}};
